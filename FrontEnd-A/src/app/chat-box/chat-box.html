 <mat-card class="chat-container">
      <!-- Chat Header -->
      <mat-card-header class="chat-header">
        <div mat-card-avatar class="chat-avatar">
          <mat-icon>support_agent</mat-icon>
        </div>
        <mat-card-title>{{userName() | uppercase}}</mat-card-title>
        <mat-card-subtitle>Online</mat-card-subtitle>
      </mat-card-header>

      <!-- Messages Container -->
      <mat-card-content class="messages-container" #messagesContainer>
        <div class="messages-list">
          <div 
            *ngFor="let message of messages; trackBy: trackByMessage"
            class="message-wrapper"
            [ngClass]="{'user-message': message.sender === 'user', 'bot-message': message.sender === 'bot'}"
          >
            <!-- Avatar -->
            <div class="message-avatar" *ngIf="message.sender === 'bot'">
              <mat-icon class="bot-icon">smart_toy</mat-icon>
            </div>

            <!-- Message Bubble -->
            <div class="message-bubble" [ngClass]="message.sender + '-bubble'">
              <div class="message-text">{{ message.text }}</div>
              <div class="message-time">
                {{ formatTime(message.timestamp) }}
              </div>
            </div>

            <!-- User Avatar -->
            <div class="message-avatar" *ngIf="message.sender === 'user'">
              <mat-icon class="user-icon">person</mat-icon>
            </div>
          </div>

          <!-- Typing Indicator -->
          <div class="message-wrapper bot-message" *ngIf="isTyping">
            <div class="message-avatar">
              <mat-icon class="bot-icon">smart_toy</mat-icon>
            </div>
            <div class="message-bubble bot-bubble typing-bubble">
              <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>

      <!-- Input Area -->
      <mat-card-actions class="chat-input-area">
        <div class="input-container">
          <mat-form-field class="message-input" appearance="outline">
            <mat-label>Type a message...</mat-label>
            <input 
              matInput 
              [formControl]="messageControl"
              (keydown.enter)="sendMessage()"
              placeholder="Type your message here..."
              #messageInput
            >
            <button 
              mat-icon-button 
              matSuffix 
              (click)="sendMessage()"
              [disabled]="!messageControl.value?.trim()"
              color="primary"
            >
              <mat-icon>send</mat-icon>
            </button>
          </mat-form-field>
        </div>
      </mat-card-actions>
    </mat-card>